<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spin Wheel Form Integration Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .form-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        input, select, textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            box-sizing: border-box;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #6c757d;
            cursor: not-allowed;
        }
        .success-message {
            background-color: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            display: none;
        }
        .error-message {
            background-color: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            display: none;
        }
        .spin-wheel-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .instructions {
            background-color: #e7f3ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .code-example {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <h1>Spin Wheel Form Integration Example</h1>
    
    <div class="instructions">
        <h3>Instructions:</h3>
        <p>This example demonstrates how to integrate the SpinWheelWidget with a form. When the form is submitted successfully, the spin wheel will automatically trigger.</p>
        <p><strong>Key Points:</strong></p>
        <ul>
            <li>Set <code>data-spin-wheel-box-is-form="on"</code> on the spin wheel container</li>
            <li>Use <code>triggerSpinWheel()</code> function to programmatically trigger the spin</li>
            <li>Call the function after successful form submission</li>
        </ul>
    </div>

    <!-- Example Form -->
    <div class="form-container">
        <h2>Contact Form</h2>
        <form id="contactForm">
            <div class="form-group">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            
            <div class="form-group">
                <label for="phone">Phone:</label>
                <input type="tel" id="phone" name="phone">
            </div>
            
            <div class="form-group">
                <label for="message">Message:</label>
                <textarea id="message" name="message" rows="4"></textarea>
            </div>
            
            <button type="submit" id="submitBtn">Submit Form</button>
        </form>
        
        <div id="successMessage" class="success-message">
            Form submitted successfully! The spin wheel will start automatically.
        </div>
        
        <div id="errorMessage" class="error-message">
            There was an error submitting the form. Please try again.
        </div>
    </div>

    <!-- Spin Wheel Widget (Form Mode) -->
    <div class="spin-wheel-container">
        <h2>Win a Prize!</h2>
        <p>Complete the form above to spin the wheel and win exciting prizes!</p>
        
        <!-- This is where your SpinWheelWidget would be placed -->
        <!-- Make sure to set data-spin-wheel-box-is-form="on" -->
        <div id="spinWheelContainer" 
             class="spin-wheel-container" 
             data-spin-wheel-box-is-form="on"
             data-pointer-position="top"
             data-winning-text1-title="Congratulations! You won"
             data-winning-text2-title="Use this code at checkout"
             data-losing-text1-title="Better luck next time!"
             style="
                position: relative;
                background-color: #f0f9ff;
                padding: 2rem;
                border-radius: 1rem;
                text-align: center;
                font-family: Arial, sans-serif;
             ">
            
            <!-- Wheel -->
            <div style="position: 'relative', margin: '0 auto'">
                <div class="spin-wheel" style="
                    aspect-ratio: 1 / 1;
                    border-radius: 50%;
                    background: conic-gradient(#FCD34D 0deg 90deg, #93C5FD 90deg 180deg, #FCD34D 180deg 270deg, #93C5FD 270deg 360deg);
                    position: relative;
                    margin: 0 auto;
                    width: 300px;
                    height: 300px;
                ">
                    <!-- Wheel Items -->
                    <div class="wheel-item" data-score="10" data-lose-option="off" data-title="20% OFF" data-coupon-code="SAVE20" style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translateX(-50%) translateY(-50%) rotate(45deg) translateY(-90px) rotate(-90deg);
                        transform-origin: center;
                        text-align: center;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        width: max-content;
                        color: #ffffff;
                        font-size: 16px;
                        font-weight: bold;
                        line-height: 1.2;
                        pointer-events: none;
                        white-space: nowrap;
                    ">20% OFF</div>
                    
                    <div class="wheel-item" data-score="5" data-lose-option="off" data-title="10% OFF" data-coupon-code="SAVE10" style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translateX(-50%) translateY(-50%) rotate(135deg) translateY(-90px) rotate(-90deg);
                        transform-origin: center;
                        text-align: center;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        width: max-content;
                        color: #ffffff;
                        font-size: 16px;
                        font-weight: bold;
                        line-height: 1.2;
                        pointer-events: none;
                        white-space: nowrap;
                    ">10% OFF</div>
                    
                    <div class="wheel-item" data-score="1" data-lose-option="on" data-title="Try Again" data-coupon-code="" style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translateX(-50%) translateY(-50%) rotate(225deg) translateY(-90px) rotate(-90deg);
                        transform-origin: center;
                        text-align: center;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        width: max-content;
                        color: #ffffff;
                        font-size: 16px;
                        font-weight: bold;
                        line-height: 1.2;
                        pointer-events: none;
                        white-space: nowrap;
                    ">Try Again</div>
                    
                    <div class="wheel-item" data-score="8" data-lose-option="off" data-title="Free Shipping" data-coupon-code="FREESHIP" style="
                        position: absolute;
                        top: 50%;
                        left: 50%;
                        transform: translateX(-50%) translateY(-50%) rotate(315deg) translateY(-90px) rotate(-90deg);
                        transform-origin: center;
                        text-align: center;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        width: max-content;
                        color: #ffffff;
                        font-size: 16px;
                        font-weight: bold;
                        line-height: 1.2;
                        pointer-events: none;
                        white-space: nowrap;
                    ">Free Shipping</div>
                </div>

                <!-- Pointer -->
                <div class="pointer" style="
                    position: absolute;
                    top: -0.5rem;
                    left: 50%;
                    width: 1.5rem;
                    height: 1.5rem;
                    background-color: #ef4444;
                    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
                    transform: translateX(-50%);
                    z-index: 10;
                "></div>

                <!-- Spin Button (Hidden in form mode) -->
                <button class="spin-button" style="
                    padding: 0.8rem 1.5rem;
                    font-size: 1rem;
                    font-weight: bold;
                    color: #fff;
                    background-color: #ef4444;
                    border: none;
                    border-radius: 2rem;
                    cursor: pointer;
                    transition: background-color 0.3s ease;
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                "></button>
            </div>

            <!-- Result display area -->
            <div class="result" style="display: none; margin-top: 1rem;"></div>
        </div>
    </div>

    <!-- Code Example -->
    <div class="code-example">
        <h3>JavaScript Integration Code:</h3>
        <pre><code>// Include the SpinWheelWidget script first
// &lt;script src="path/to/SpinWheelWidget/View/export.js"&gt;&lt;/script&gt;

// Form submission handler
document.getElementById('contactForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const submitBtn = document.getElementById('submitBtn');
    const successMessage = document.getElementById('successMessage');
    const errorMessage = document.getElementById('errorMessage');
    
    // Disable submit button
    submitBtn.disabled = true;
    submitBtn.textContent = 'Submitting...';
    
    try {
        // Simulate form submission (replace with your actual form submission logic)
        const formData = new FormData(this);
        
        // Example: Send to your server
        const response = await fetch('/api/submit-form', {
            method: 'POST',
            body: formData
        });
        
        if (response.ok) {
            // Show success message
            successMessage.style.display = 'block';
            errorMessage.style.display = 'none';
            
            // Wait a moment for user to see the success message
            setTimeout(() => {
                // Trigger the spin wheel automatically
                triggerSpinWheel('spinWheelContainer');
            }, 1000);
            
        } else {
            throw new Error('Form submission failed');
        }
        
    } catch (error) {
        console.error('Form submission error:', error);
        errorMessage.style.display = 'block';
        successMessage.style.display = 'none';
        
        // Re-enable submit button
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit Form';
    }
});

// Alternative: Trigger spin wheel for specific container
// triggerSpinWheel('spinWheelContainer');

// Or trigger all spin wheels on the page
// triggerSpinWheel();</code></pre>
    </div>

    <script>
        // Simulate the SpinWheelWidget functionality for this example
        // In your actual implementation, include the SpinWheelWidget script
        
        // Mock implementation for demonstration
        window.triggerSpinWheel = function(containerId) {
            const container = containerId ? document.getElementById(containerId) : document.querySelector('.spin-wheel-container');
            if (!container) return;
            
            const wheel = container.querySelector('.spin-wheel');
            const result = container.querySelector('.result');
            const button = container.querySelector('.spin-button');
            
            if (!wheel || !result || !button) return;
            
            // Disable button
            button.disabled = true;
            button.textContent = 'Spinning...';
            
            // Hide previous result
            result.style.display = 'none';
            
            // Random rotation
            const randomRotation = Math.random() * 3600 + 1800; // 5-10 full rotations
            wheel.style.transition = 'transform 3s ease-out';
            wheel.style.transform = `rotate(${randomRotation}deg)`;
            
            // Show result after animation
            setTimeout(() => {
                const items = container.querySelectorAll('.wheel-item');
                const randomItem = items[Math.floor(Math.random() * items.length)];
                const isLose = randomItem.dataset.loseOption === 'on';
                
                if (isLose) {
                    result.innerHTML = `
                        <div style="background-color: white; padding: 15px; border-radius: 12px; text-align: center; width: 320px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); margin: 0px; font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center;">
                            <h2 style="font-size: 22px; font-weight: bold; color: #dc2626; margin: 10px 0;">Sorry, You didn't win anything</h2>
                        </div>
                    `;
                } else {
                    result.innerHTML = `
                        <div style="background-color: white; padding: 15px; border-radius: 12px; text-align: center; width: 320px; font-family: Arial, sans-serif; display: flex; flex-direction: column; align-items: center;">
                            <p style="font-size: 16px; color: #333; margin: 10px 0 5px 0;">Congratulations, you won</p>
                            <p style="font-size: 22px; font-weight: bold; color: #222; margin: 0 0 15px 0;">${randomItem.dataset.title}</p>
                            <div style="border-radius: 8px; padding: 12px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; background-color: #f8f0ff; border: 1px solid #e6d4f7; width: 200px; margin-bottom: 10px;" onclick="navigator.clipboard.writeText('${randomItem.dataset.couponCode}');">
                                <span style="color: #333; font-weight: bold; font-size: 16px; letter-spacing: 1px; margin: 0; margin-right: 40px;">${randomItem.dataset.couponCode}</span>
                                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="#333">
                                    <path d="M0 0h24v24H0z" fill="none" />
                                    <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                                </svg>
                            </div>
                            <p style="font-size: 14px; color: #666; margin: 0;">copy this code and use during checkout</p>
                        </div>
                    `;
                }
                
                result.style.display = 'block';
                button.disabled = false;
                button.textContent = 'Spin';
            }, 3000);
        };

        // Form submission handler
        document.getElementById('contactForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            
            // Disable submit button
            submitBtn.disabled = true;
            submitBtn.textContent = 'Submitting...';
            
            try {
                // Simulate form submission delay
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // Simulate success (replace with your actual form submission logic)
                const formData = new FormData(this);
                console.log('Form data:', Object.fromEntries(formData));
                
                // Show success message
                successMessage.style.display = 'block';
                errorMessage.style.display = 'none';
                
                // Wait a moment for user to see the success message
                setTimeout(() => {
                    // Trigger the spin wheel automatically
                    triggerSpinWheel('spinWheelContainer');
                }, 1000);
                
            } catch (error) {
                console.error('Form submission error:', error);
                errorMessage.style.display = 'block';
                successMessage.style.display = 'none';
                
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.textContent = 'Submit Form';
            }
        });
    </script>
</body>
</html>
